<%- include("partials/header.ejs") %>

<div class="container d-flex justify-content-center align-items-center vh-100">
<form action="/new" method="post" class="p-4 w-75 w-md-50 border rounded bg-light">
  <div class="mb-3">
  <label for="title" class="form-label">Title:</label>
  <input type="text" class="form-control form-title" name="title" required>
  <label for="author" class="form-label">Author:</label>
  <input type="text" class="form-control form-title" name="author" required>
</div>
<div class="mb-3">
  <label for="content" class="form-label">Review:</label>
  <textarea class="form-control form-content" name="review" rows="8" required></textarea>
  <div class="text-center">

    <div class="ratings-wrapper">
      <div class="ratings" name="ratings">
        <span data-rating="5" class="fa fa-star"></span>
        <span data-rating="4" class="fa fa-star"></span>
        <span data-rating="3" class="fa fa-star"></span>
        <span data-rating="2" class="fa fa-star"></span>
        <span data-rating="1" class="fa fa-star"></span>
      </div>
    </div>

  <input type="submit" class="btn btn-primary submit-btn" value="Submit">
</div>
</div>
</form>
</div>

<script>

  let stars = document.querySelectorAll(".ratings span");
  let products = document.querySelectorAll(".ratings");
  let ratings = []; 

  for(let star of stars){
    star.addEventListener("click", function(){

      let children = star.parentElement.children; 
      for(let child of children) {
        if(child.getAttribute("data-clicked")) {
          return false;
        }
      }
      
      this.setAttribute("data-clicked", "true");
      let rating = this.dataset.rating; 
      console.log(rating);

      ratings.push(rating);


    });

  }

</script>