<%- include('partials/header.ejs'); -%>
  <main>
        <hr class="top-line">
        
        <h3> You've read a total of <%= totalBook %> books </h3>

        <div data-rating="5"></div>

        <form class="add-form" action="/add" method="get">
            <input type="text" name="add" autofocus placeholder="Add new book...">
            <button class="add-button" type="submit"> Add </button>
          </form>

        <hr class="bottom-line">

        <div class="main-container">
        <% books.forEach(book => { %>
          
            <div class="card mb-3" style="max-width: 680px;">
              <div class="row g-0">
                <div class="col-md-4">
                  <img src="https://covers.openlibrary.org/b/isbn/<%= book.cover %>-M.jpg" class="img-fluid rounded-start cover-img" alt="Book Cover">
                </div>
                <div class="col-md-8">
                  <div class="card-body">
                    <h5 class="card-title"><%= book.title %></h5>
                    <h6 class="card-text"><%= book.author %></h6>
                    <p class="card-text"><%= book.review.substring(0,200) + '...' %></p>


                    <div class="star-rating rating-container">
                      <% for (let i = 1; i <= 5; i++) { %>
                        <span class="fa fa-star <%= i <= book.star ? 'checked' : '' %>"> </span>
                      <% } %>
                    </div>


                    <p class="card-text"><small class="text-body-secondary"><%= new Date(book.datecolumn).toDateString() %></small></p>
                    <div class="btn-container d-flex gap-2">
                    <form action="/edit/<%= book.id %>" method="get"> 
                      <button class="add-button" type="submit">Edit</button>
                    </form>
                    
                    <form action="/delete/<%= book.id %>" method="get" onsubmit="return confirm('Are you sure you want to delete this post?');">
                    <button class="add-button" type="submit"><i class="fa-solid fa-trash"></i></button>
                  </form>
                  </div>
                  </div>
                </div>
              </div>
            </div>   
        <% }) %>  
          </div>   
  </main>








